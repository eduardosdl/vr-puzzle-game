<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <title>VR Puzzle Game</title>
    <style>
      /* Menu de sele√ß√£o de puzzle */
      #puzzle-menu {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1000;
        background: rgba(255, 255, 255, 0.9);
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        font-family: Arial, sans-serif;
      }

      #puzzle-menu h3 {
        margin: 0 0 10px 0;
        color: #333;
        font-size: 16px;
      }

      #puzzle-menu button {
        display: block;
        width: 100%;
        margin: 5px 0;
        padding: 10px;
        border: none;
        border-radius: 5px;
        background: #4caf50;
        color: white;
        font-size: 14px;
        cursor: pointer;
        transition: background 0.3s;
      }

      #puzzle-menu button:hover {
        background: #45a049;
      }

      #puzzle-menu button.reset {
        background: #ff9800;
      }

      #puzzle-menu button.reset:hover {
        background: #e68900;
      }

      #current-puzzle {
        margin-top: 10px;
        padding: 8px;
        background: #e3f2fd;
        border-radius: 5px;
        font-size: 12px;
        color: #1976d2;
        text-align: center;
      }

      #instructions {
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 1000;
        background: rgba(255, 255, 255, 0.9);
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        font-family: Arial, sans-serif;
        font-size: 12px;
        max-width: 250px;
      }

      #instructions h4 {
        margin: 0 0 8px 0;
        color: #333;
        font-size: 14px;
      }

      #instructions p {
        margin: 5px 0;
        color: #555;
      }

      #instructions kbd {
        background: #f0f0f0;
        padding: 2px 6px;
        border-radius: 3px;
        border: 1px solid #ccc;
        font-family: monospace;
      }
    </style>
  </head>
  <body>
    <!-- Menu de sele√ß√£o de puzzle -->
    <div id="puzzle-menu">
      <h3>üß© Escolha o Puzzle</h3>
      <button onclick="selectPuzzle(0)">Puzzle 1</button>
      <button onclick="selectPuzzle(1)">Puzzle 2</button>
      <button onclick="selectPuzzle(2)">Puzzle 3</button>
      <button class="reset" onclick="resetPuzzle()">üîÑ Resetar</button>
      <div id="user-code-display" style="margin-top: 10px; padding: 8px; background: #fff3cd; border-radius: 5px; font-size: 11px; color: #856404;">
        <strong>üë§ User:</strong> <span id="code-value">Carregando...</span>
      </div>
    </div>

    <!-- Instru√ß√µes -->
    <div id="instructions">
      <h4>üéÆ Controles:</h4>
      <p>üñ±Ô∏è <strong>Olhar:</strong> Mova o mouse</p>
      <p>üëÅÔ∏è <strong>Selecionar:</strong> Fixe o olhar</p>
      <p>üîÑ <strong>Rotacionar:</strong> Pressione <kbd>R</kbd></p>
      <p>
        <small
          >Mantenha <kbd>R</kbd> pressionado enquanto seleciona uma pe√ßa</small
        >
      </p>
    </div>

    <a-scene id="scene">
      <a-sky color="#ECECEC"></a-sky>

      <a-plane
        rotation="-90 0 0"
        width="10"
        height="10"
        color="#c2c2c2"
        position="0 0 -5"
        shadow="receive: true"
      ></a-plane>

      <a-entity
        line-event
        id="line"
        line="start: 0 0 0; end: 0 0 0; color: red"
        transparent="true"
      ></a-entity>

      <a-text
        id="pieces-left"
        value="Area de remanejamento"
        color="#FF0000"
        position="-1.1 5.5 -5"
        width="5"
        rotation="30 0 0"
      ></a-text>

      <a-entity camera wasd-controls look-controls position="0 1.6 0">
        <a-plane
          id="error"
          position="0 -0.5 -2"
          width="0.8"
          height="0.2"
          color="#FF0000"
          side="double"
          opacity="0.8"
          rotation="0 0 0"
          visible="false"
        >
          <a-text
            value="Erro no encaixe"
            color="#FFFFFF"
            position="-0.3 0 0.01"
            color="#8B0000"
            width="2"
          ></a-text>
        </a-plane>
        <!-- Texto de erro -->
        <a-entity
          cursor-ring
          raycaster="objects: .clickable"
          id="cursor"
          geometry="primitive: ring; radiusInner: 0.015; radiusOuter: 0.02;"
          cursor="fuse: false"
          material="color: black; shader: flat"
          position="0 0 -1.5"
        >
        </a-entity>
      </a-entity>
    </a-scene>

    <script>
      // Definir imagens dispon√≠veis
      const availableImages = [
        "images/puzzle1.jpg",
        "images/puzzle2.jpeg",
        "images/puzzle3.jpg",
      ];

      // Fun√ß√£o para selecionar puzzle
      function selectPuzzle(index) {
        loadPuzzleTexture(availableImages[index]);
        resetPuzzle();
      }
    </script>
  </body>
  <script src="script.js"></script>
</html>
